<ion-header class="forum-head">
  <ion-navbar navbar-color>
    <ion-toolbar [attr.primary]="isAndroid ? '' : null" no-border-top>
        <ion-title>帖子详情</ion-title>
    </ion-toolbar>
  </ion-navbar>
</ion-header>

<ion-content class="forum forum-detail">
    <div>
        <ion-list>
            <ion-item>
                <ion-card>
                    <ion-item>
                        <ion-avatar item-left>
                            <img src="{{item.photo}}">
                        </ion-avatar>
                        <div>
                            <div style="position: relative;">
                                <h2>{{item.nickname}}</h2>
                                <p class="time">{{item.publishDatetime}}</p>
                                <button outline small class="origin content-btn" (click)="follow()">+关注</button>
                            </div>
                            <ion-card-content>
                                <h2 style="margin: 6px 0;">{{item.title}}</h2>
                                <p>{{item.content}}</p>
                                <div [style.height]="imgHeight" class="img-cont" (click)="showImg($event)">
                                    <img class="imgs" [style.width]="imgHeight" src="{{p}}" *ngFor="let p of item.pic"/>
                                </div>
                            </ion-card-content>

                            <div class="com-btn">
                                <ion-buttons class="clearfix">
                                    <button class="fl">
                                        <i class="icon iconfont">&#xe60a;</i>
                                    </button>
                                    <button class="fl">
                                        <ion-icon name="trash"></ion-icon>
                                    </button>
                                    <button class="fr">
                                        <i class="icon iconfont">&#xe610;</i><span>{{item.totalCommNum}}</span>
                                    </button>
                                    <button class="fr" (click)="praise(item.code, index)">
                                        <i class="icon iconfont">&#xe624;</i>
                                    </button>
                                </ion-buttons>
                            </div>
                            <div class="comment">
                                <div class="com-top clearfix">
                                    <button class="fl">
                                        <i class="icon iconfont">&#xe624;</i>
                                        <span>{{item.totalDzNum}}</span>
                                    </button>
                                    <div class="t-3dot">
                                        <span *ngFor="let g of item.goodList">{{g.nickname}}</span>
                                    </div>
                                </div>
                                <div class="com-bottom">
                                    <ion-list>
                                        <ion-item *ngFor="let c of item.commentList">
                                            <span class="u-name"><span>{{c.nickname}}</span>：</span><span class="u-msg">c.content</span>
                                        </ion-item>
                                    </ion-list>
                                </div>
                            </div>
                        </div>
                    </ion-item>
                </ion-card>
            </ion-item>
        </ion-list>
    </div>
</ion-content>
<div id="ylImg2" class="mask hidden" (click)="closeImg();">
    <div>
        <div class="wrapper">
            <div class="scroller" [style.line-height]="pHeight">
                <img id="yl-img2"/>
            </div>
        </div>
    </div>
</div>
<ion-footer class="nextpage-foot">
    <div class="bootomInput">
      <ion-input #msgInput [(ngModel)]="inputValue" (focus)="doFocus($event)" placeholder="请输入信息"></ion-input>
      <a (click)="sendMsg(msgInput.value)">发送</a>
    </div>
</ion-footer>